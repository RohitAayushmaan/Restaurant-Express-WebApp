{% extends 'base.html' %}
{% block content %}
    {% load static %}
    {% static "image" as baseUrl %}



<div style="position:relative;margin-top:90px;height:auto;width:auto;" align="center">
    {% if finalorder %}
    <h1 align="center" style="color:#1abc9c; font-size:50px; font-family:Forte;">{{finalorder}}</h1>
    {% else %}
    <h1 align="center" style="color:#1abc9c; font-size:50px; font-family:Forte;">My Cart</h1>
    {% endif %}
    {% if cart1 %}
    <div class="container">
        <div class="row">
            <div class="col-12 col-lg-4 col-md-6" style="padding:50px; border:solid 1px black">
                <div>
                    <img src="{% static 'image/order1.png' %}" class="img-fluid" style="border-radius:15px; width:100%">
                </div>
                <form action="additem" method="post">
                    {% csrf_token %}
                    {% for item in orders %}

                    <div style="display:flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h6 style="color:#1C1C1C; margin-top:20px;font-weight:500;">{{item.item_name}}</h6>
                        </div>
                        <div>
                            <h6 style="color:#1C1C1C; margin-top:20px;font-weight:500;">₹{{item.price}}</h6>
                        </div>
                        <div>
                            <form action="itemremove" method="post">
                                {% csrf_token %}
                                {% if finalorder %}
                                <h6>{{oitem.status}}</h6>
                                {% else %}
                                <input name="item_id" type="hidden" value="{{item.id}}" class="hidden" style="display:none" required>
                                <button class="btn btn-danger " type="submit" style="font-weight: 500; font-size:12px;
                                color:#ffffff; padding:1px 5px">Remove</button>
                                {% endif %}
                            </form>
                        </div>
                    </div>
                    {% endfor %}
                    <hr>
                    {% if totalprice %}
                    <div style="display:flex; justify-content: space-between;">
                        <div>
                            <h6>Total Price</h6>
                        </div>
                        <div>
                            <h6>₹ {{totalprice}}</h6>
                        </div>
                    </div>
<!--                    <button id="btno" type="submit" class="btn mt-2 mb-3" style="padding:2px 8px; font-size:16px;font-weight:600; background-color:#318616; color: white;" value={{user}}>Order Now</button>-->
                    {% endif %}
                </form>

                <div align="center">
        {% if finalorder  %}
        <h1 align="center" style="margin-top:20px;color:red; font-size:50px; font-family:Forte;">Thank You </h1>
        {% else %}


        <button class="btn btn-success " type="button" style=" margin-top:40px;border-radius:10px;font-weight: 700; font-size:25px;">
            <a id="rzp-button1" href="#" style="color:#ffffff;text-decoration: none;">Pay Now</a></button>

        <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
        <script>
            var options = {
                "key": "rzp_test_fK6V4JrgIbcHdj",
                "amount": "{{amount}}",
                "currency": "INR",
                "name": "Aayushmaan",
                "description": "Home Delivery Restaurant",
                "image": "{{baseUrl}}/{{logor.img}}",
                "order_id": "{{payment.id}}",
                "callback_url": "{% url 'payment' %}",
                "prefill": {
                    "name": "Aayushmaan",
                    "email": "rohiit.chaurasiya@example.com",
                    "contact": "8840854918"
                },
                "notes": {
                    "address": "Razorpay Corporate Office"
                },
                "theme": {
                    "color": "#3399cc"
                }
            };
            var rzp1 = new Razorpay(options);
            document.getElementById('rzp-button1').onclick = function(e){
                rzp1.open();
                e.preventDefault();
            }
        </script>
        {% endif %}
    </div>
    {% else %}
    <div style="margin-top:0px;" align="center">
    <img src="{{baseUrl}}/{{ucart.img}}" class="img-fluid" style="width:25%">
        <h1 align="center" style="color:red; font-size:30px;">You don't have any items in your cart!</h1>
        <button class="btn" type="button" style=" margin-top:10px; border-radius:15px; font-weight:600; font-size:25px; background-color:#318616; padding:0px 15px 5px 15px">
            <a href="{% url 'menu' %}" style="color:#ffffff;">Order Now</a></button>
    </div>
    {% endif %}
    </div>

            </div>
            <!--column close-->
        </div>
        <!-- row close-->
    </div>
    <!-- container close -->



{% endblock %}
